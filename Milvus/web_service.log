2025-08-01 16:30:30,221 - INFO - 正在初始化PDF搜索服务...
/opt/homebrew/lib/python3.13/site-packages/milvus_lite/__init__.py:15: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
  from pkg_resources import DistributionNotFound, get_distribution
2025-08-01 16:30:30,779 - INFO - 成功连接到Milvus Lite: ./milvus_japanese.db
2025-08-01 16:30:30,781 - INFO - 使用现有集合: pdf_documents_japanese
2025-08-01 16:30:30,781 - INFO - 正在加载语义向量化模型: cl-nagoya/sup-simcse-ja-base
2025-08-01 16:30:30,804 - INFO - Use pytorch device_name: mps
2025-08-01 16:30:30,804 - INFO - Load pretrained SentenceTransformer: cl-nagoya/sup-simcse-ja-base
2025-08-01 16:30:34,638 - INFO - 语义向量化模型加载完成
2025-08-01 16:30:34,658 - INFO - 集合已加载到内存
2025-08-01 16:30:34,663 - INFO - 服务初始化完成 - 数据库中有 9 个文档块
============================================================
🚀 启动PDF文档智能搜索Web服务
============================================================
✅ 服务初始化成功
🌐 启动Web服务器...
📍 访问地址: http://localhost:5001
⏹️  按 Ctrl+C 停止服务
============================================================
 * Serving Flask app 'start_web_service'
 * Debug mode: off
2025-08-01 16:30:34,705 - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5001
 * Running on http://10.22.111.202:5001
2025-08-01 16:30:34,705 - INFO - [33mPress CTRL+C to quit[0m
2025-08-01 16:30:41,911 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:41] "GET /api/health HTTP/1.1" 200 -
2025-08-01 16:30:41,914 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:41] "GET /api/stats HTTP/1.1" 200 -
2025-08-01 16:30:41,916 - INFO - 搜索查询: 計量装置
Batches:   0%|          | 0/1 [00:00<?, ?it/s]/opt/homebrew/lib/python3.13/site-packages/torch/nn/modules/module.py:1762: FutureWarning: `encoder_attention_mask` is deprecated and will be removed in version 4.55.0 for `BertSdpaSelfAttention.forward`.
  return forward_call(*args, **kwargs)
Batches: 100%|██████████| 1/1 [00:00<00:00,  4.37it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  4.37it/s]
2025-08-01 16:30:42,168 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:42] "POST /api/search HTTP/1.1" 200 -
2025-08-01 16:30:42,170 - INFO - 增强问答查询: 計量装置が傾いている原因として、例３では何が挙げられていますか？
2025-08-01 16:30:42,170 - INFO - 增强问答系统处理问题: 計量装置が傾いている原因として、例３では何が挙げられていますか？
2025-08-01 16:30:42,170 - INFO - 提取的关键词: ['例３', '計量装置', '傾いている', '原因']
Batches:   0%|          | 0/1 [00:00<?, ?it/s]/opt/homebrew/lib/python3.13/site-packages/torch/nn/modules/module.py:1762: FutureWarning: `encoder_attention_mask` is deprecated and will be removed in version 4.55.0 for `BertSdpaSelfAttention.forward`.
  return forward_call(*args, **kwargs)
Batches: 100%|██████████| 1/1 [00:00<00:00, 72.95it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 74.31it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 19.04it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 21.42it/s]
2025-08-01 16:30:42,307 - INFO - 关键词搜索结果: 24 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 15.36it/s]
2025-08-01 16:30:42,375 - INFO - 语义搜索结果: 9 个
2025-08-01 16:30:42,375 - INFO - 合并后结果: 9 个
2025-08-01 16:30:42,375 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:42] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 16:30:42,378 - INFO - 增强问答查询: 例３について教えてください
2025-08-01 16:30:42,378 - INFO - 增强问答系统处理问题: 例３について教えてください
2025-08-01 16:30:42,378 - INFO - 提取的关键词: ['例３']
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 80.04it/s]
2025-08-01 16:30:42,393 - INFO - 关键词搜索结果: 1 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 17.46it/s]
2025-08-01 16:30:42,453 - INFO - 语义搜索结果: 9 个
2025-08-01 16:30:42,453 - INFO - 合并后结果: 9 个
2025-08-01 16:30:42,453 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:42] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 16:30:42,455 - INFO - 增强问答查询: 板が腐った場合どうなりますか？
2025-08-01 16:30:42,455 - INFO - 增强问答系统处理问题: 板が腐った場合どうなりますか？
2025-08-01 16:30:42,455 - INFO - 提取的关键词: []
2025-08-01 16:30:42,455 - INFO - 关键词搜索结果: 0 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 16.89it/s]
2025-08-01 16:30:42,517 - INFO - 语义搜索结果: 9 个
2025-08-01 16:30:42,517 - INFO - 合并后结果: 9 个
2025-08-01 16:30:42,517 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:42] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 16:30:42,520 - INFO - 增强问答查询: 計量装置の損傷について説明してください
2025-08-01 16:30:42,520 - INFO - 增强问答系统处理问题: 計量装置の損傷について説明してください
2025-08-01 16:30:42,520 - INFO - 提取的关键词: ['計量装置', '損傷']
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 79.90it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 75.55it/s]
2025-08-01 16:30:42,551 - INFO - 关键词搜索结果: 10 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 53.62it/s]
2025-08-01 16:30:42,572 - INFO - 语义搜索结果: 9 个
2025-08-01 16:30:42,572 - INFO - 合并后结果: 9 个
2025-08-01 16:30:42,572 - INFO - 127.0.0.1 - - [01/Aug/2025 16:30:42] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 18:35:36,196 - INFO - 127.0.0.1 - - [01/Aug/2025 18:35:36] "GET / HTTP/1.1" 200 -
2025-08-01 18:35:36,730 - INFO - 127.0.0.1 - - [01/Aug/2025 18:35:36] "GET /api/health HTTP/1.1" 200 -
2025-08-01 18:35:36,730 - INFO - 127.0.0.1 - - [01/Aug/2025 18:35:36] "GET /api/stats HTTP/1.1" 200 -
2025-08-01 18:35:50,052 - INFO - 增强问答查询: 計量装置が傾いている原因として、   例３では何が挙げられていますか？
2025-08-01 18:35:50,053 - INFO - 增强问答系统处理问题: 計量装置が傾いている原因として、   例３では何が挙げられていますか？
2025-08-01 18:35:50,053 - INFO - 提取的关键词: ['例３', '計量装置', '傾いている', '原因']
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:01<00:00,  1.65s/it]Batches: 100%|██████████| 1/1 [00:01<00:00,  1.65s/it]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 57.58it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 33.31it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 42.00it/s]
2025-08-01 18:35:51,850 - INFO - 关键词搜索结果: 24 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 24.42it/s]
2025-08-01 18:35:51,894 - INFO - 语义搜索结果: 9 个
2025-08-01 18:35:51,894 - INFO - 合并后结果: 9 个
2025-08-01 18:35:51,895 - INFO - 127.0.0.1 - - [01/Aug/2025 18:35:51] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 18:36:02,562 - INFO - 增强问答查询: 計量装置が傾いている原因として、   例３では何が挙げられていますか？
2025-08-01 18:36:02,566 - INFO - 增强问答系统处理问题: 計量装置が傾いている原因として、   例３では何が挙げられていますか？
2025-08-01 18:36:02,566 - INFO - 提取的关键词: ['例３', '計量装置', '傾いている', '原因']
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  3.26it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  3.26it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 72.96it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 73.87it/s]
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 81.56it/s]
2025-08-01 18:36:02,926 - INFO - 关键词搜索结果: 24 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00, 64.45it/s]
2025-08-01 18:36:02,945 - INFO - 语义搜索结果: 9 个
2025-08-01 18:36:02,945 - INFO - 合并后结果: 9 个
2025-08-01 18:36:02,945 - INFO - 127.0.0.1 - - [01/Aug/2025 18:36:02] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 18:37:45,363 - INFO - 127.0.0.1 - - [01/Aug/2025 18:37:45] "GET / HTTP/1.1" 200 -
2025-08-01 18:37:45,732 - INFO - 127.0.0.1 - - [01/Aug/2025 18:37:45] "GET /api/stats HTTP/1.1" 200 -
2025-08-01 18:37:45,733 - INFO - 127.0.0.1 - - [01/Aug/2025 18:37:45] "GET /api/health HTTP/1.1" 200 -
2025-08-01 18:37:49,004 - INFO - 增强问答查询: どこの電線に損傷がありますか？
2025-08-01 18:37:49,004 - INFO - 增强问答系统处理问题: どこの電線に損傷がありますか？
2025-08-01 18:37:49,004 - INFO - 提取的关键词: ['損傷']
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  2.23it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  2.23it/s]
2025-08-01 18:37:49,469 - INFO - 关键词搜索结果: 1 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  2.85it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  2.85it/s]
2025-08-01 18:37:49,823 - INFO - 语义搜索结果: 9 个
2025-08-01 18:37:49,823 - INFO - 合并后结果: 9 个
2025-08-01 18:37:49,824 - INFO - 127.0.0.1 - - [01/Aug/2025 18:37:49] "POST /api/answer HTTP/1.1" 200 -
2025-08-01 18:38:16,292 - INFO - 增强问答查询: 電線の状態はどのようになっていますか
2025-08-01 18:38:16,293 - INFO - 增强问答系统处理问题: 電線の状態はどのようになっていますか
2025-08-01 18:38:16,294 - INFO - 提取的关键词: []
2025-08-01 18:38:16,294 - INFO - 关键词搜索结果: 0 个
Batches:   0%|          | 0/1 [00:00<?, ?it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  1.75it/s]Batches: 100%|██████████| 1/1 [00:00<00:00,  1.75it/s]
2025-08-01 18:38:16,878 - INFO - 语义搜索结果: 9 个
2025-08-01 18:38:16,878 - INFO - 合并后结果: 9 个
2025-08-01 18:38:16,879 - INFO - 127.0.0.1 - - [01/Aug/2025 18:38:16] "POST /api/answer HTTP/1.1" 200 -
